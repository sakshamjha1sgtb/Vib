<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Vibru ka Birthday ü•≥</title>
<style>
  :root {
    --bg: #0f1724;
    --accent: #ff6b6b;
    --text: #e6eef8;
    --muted: rgba(230,238,248,0.7);
    --radius: 16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family:"Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: linear-gradient(180deg,var(--bg), #071225 140%);
    color:var(--text);
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding:16px;
    overflow:hidden;
  }

  .container{
    width:100%;
    max-width:980px;
    border-radius:var(--radius);
    padding:20px;
    display:grid;
    grid-template-columns:1fr 420px;
    gap:20px;
    background: rgba(255,255,255,0.02);
    position:relative;
  }

  .left{display:flex;flex-direction:column;align-items:center;gap:16px;text-align:center}
  .title{font-size:clamp(24px,6vw,38px);font-weight:700}
  .subtitle{color:var(--muted);font-size:clamp(13px,3vw,15px)}
  .countdown{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
  .time-segment{background:rgba(255,255,255,0.05);padding:10px 12px;border-radius:10px;min-width:64px}
  .time-value{font-weight:700;font-size:18px}
  .time-label{font-size:11px;color:var(--muted)}

  .right{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}
  .image-placeholder iframe{width:100%;height:300px;border:none;border-radius:10px}
  .upload-hint{color:var(--muted);font-size:12px;text-align:center}

  /* Floating happy text (covers whole viewport) */
  #happyText{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:50}
  .happy{
    position:absolute;
    font-size:3em;
    font-weight:800;
    white-space:nowrap;
    animation-timing-function:linear;
    text-shadow:0 6px 18px rgba(0,0,0,0.5);
  }

  @keyframes floatUp {
    0%{transform:translateY(100vh) scale(1);opacity:1}
    100%{transform:translateY(-20vh) scale(1.2);opacity:0}
  }

  /* Big gift button */
  #openGiftBtn{
    display:none;
    padding:18px 36px;
    font-size:1.6rem;
    border-radius:18px;
    border:none;
    background:linear-gradient(90deg,var(--accent),#ff8a8a);
    color:#071225;
    cursor:pointer;
    z-index:100;
    box-shadow: 0 8px 30px rgba(255,107,107,0.18);
  }

  @media (max-width:880px){
    .container{grid-template-columns:1fr;align-items:center}
    .image-placeholder iframe{height:220px}
  }
</style>
</head>
<body>

<div id="happyText" aria-hidden="true"></div>

<div class="container" role="main" aria-labelledby="mainTitle">
  <section class="left">
    <h1 id="mainTitle" class="title">Vibru ka Birthday ü•≥üéä</h1>
    <p class="subtitle"> Vibru gupluuu bungu ‚Äî love you so much üíñ</p>

    <div class="countdown" id="countdownBlock" aria-live="polite" aria-atomic="true">
      <div class="time-segment"><div id="days" class="time-value">0</div><div class="time-label">Days</div></div>
      <div class="time-segment"><div id="hours" class="time-value">00</div><div class="time-label">Hours</div></div>
      <div class="time-segment"><div id="minutes" class="time-value">00</div><div class="time-label">Minutes</div></div>
      <div class="time-segment"><div id="seconds" class="time-value">00</div><div class="time-label">Seconds</div></div>
    </div>

    <button id="openGiftBtn" aria-hidden="true">üéÅ Open Your Gift</button>
  </section>

  <aside class="right" aria-label="Extras">
    <div class="image-placeholder" aria-hidden="true">
      <!-- keep your iframe preview if you want -->
      <iframe src="https://drive.google.com/file/d/1k5r5C6isaBs6Vr54L8csUxuFER95yROg/preview" allow="autoplay"></iframe>
    </div>
    <p class="upload-hint">Meri pyaari Vibruu, I love you.</p>
  </aside>
</div>

<audio id="bgMusic" src="happy.mp3" loop preload="auto"></audio>

<script>
/*
  Behavior:
   - Target moment = 10 Nov 2025 23:59:00 (local time)
   - If now >= target when page loads -> immediately start birthday mode (music + endless happy text + big button)
   - Else show countdown until target, then switch.
   - Floating text runs forever once birthday mode starts.
   - Clicking "Open Your Gift" plays bdday_vib.mp4 in fullscreen (user gesture allows fullscreen).
*/

(function(){
  const DAYS = document.getElementById('days');
  const HOURS = document.getElementById('hours');
  const MINUTES = document.getElementById('minutes');
  const SECONDS = document.getElementById('seconds');
  const countdownBlock = document.getElementById('countdownBlock');
  const happyTextContainer = document.getElementById('happyText');
  const openGiftBtn = document.getElementById('openGiftBtn');
  const bgMusic = document.getElementById('bgMusic');

  // Target: 10 November 2025 23:59:00 local time
  const target = new Date(2025, 10, 11, 00, 12, 00, 0); // monthIndex 10 => November

  let countdownInterval = null;
  let floatingInterval = null;
  let birthdayStarted = false;

  function startCountdown(){
    updateCountdown(); // immediate update
    countdownInterval = setInterval(updateCountdown, 1000);
  }

  function updateCountdown(){
    const now = new Date();
    const diff = target - now;
    if (diff <= 0){
      // target reached or passed -> start birthday mode
      clearInterval(countdownInterval);
      beginBirthdayMode();
      return;
    }
    const s = Math.floor(diff / 1000);
    const dRem = Math.floor(s / 86400);
    const hRem = Math.floor((s % 86400) / 3600);
    const mRem = Math.floor((s % 3600) / 60);
    const secRem = s % 60;
    DAYS.textContent = String(dRem);
    HOURS.textContent = String(hRem).padStart(2,'0');
    MINUTES.textContent = String(mRem).padStart(2,'0');
    SECONDS.textContent = String(secRem).padStart(2,'0');
  }

  function beginBirthdayMode(){
    if (birthdayStarted) return;
    birthdayStarted = true;

    // hide countdown
    countdownBlock.style.display = 'none';

    // attempt to play music (may be blocked until user gesture)
    bgMusic.play().catch(()=> {
      // silently fail; will start once user clicks openGiftBtn or anywhere they interact
      console.debug('Autoplay blocked; waiting for user gesture to start audio.');
    });

    // show gift button
    openGiftBtn.style.display = 'inline-block';
    openGiftBtn.setAttribute('aria-hidden','false');

    // start endless floating text (forever)
    startFloatingText();

    // bonus: clicking anywhere also tries to start music (pleasant UX on mobile)
    document.addEventListener('click', ensureMusicPlaying, { once: true });
  }

  function ensureMusicPlaying(){
    bgMusic.play().catch(()=>{}); // ignore
  }

  function startFloatingText(){
    const colors = ['#ff4081','#00e5ff','#76ff03','#ffeb3b','#ff9100','#d500f9','#8affc1','#ffd166'];
    // Immediately create a few for density
    for(let i=0;i<6;i++) spawnHappySpan();
    // keep spawning new ones forever
    floatingInterval = setInterval(spawnHappySpan, 350);
  }

  function spawnHappySpan(){
    const span = document.createElement('span');
    span.className = 'happy';
    span.textContent = randomHappyText();
    const left = Math.random() * 90; // percent
    span.style.left = left + '%';
    span.style.color = randomColor();
    const duration = 6 + Math.random() * 6; // 6-12s
    span.style.animation = `floatUp ${duration}s linear forwards`;
    // small horizontal drift using transform translateX via inline style
    const drift = (Math.random()-0.5) * 30; // -15..+15 vw
    span.style.transform = `translateX(${drift}vw)`;
    // vertical start offset (so elements don't all start strictly off-screen bottom)
   

    happyTextContainer.appendChild(span);

    // remove after animation completes (duration + small buffer)
    setTimeout(()=> {
      span.remove();
    }, (duration + 0.3) * 1000);
  }

  function randomColor(){
    const palette = ['#ff4081','#00e5ff','#76ff03','#ffeb3b','#ff9100','#d500f9','#8affc1','#ffd166'];
    return palette[Math.floor(Math.random()*palette.length)];
  }

  function randomHappyText(){
    const variants = [
      'üéâ Happy Birthday Vibruu! üéâ',
      '‚ú® Happy Birthday!!! ‚ú®',
      'üéÇ Vibruu ‚Äî Many happy returns! üéÇ',
      'üíñ Happy Birthday Vibruu! üíñ',
      'ü•≥ Love you Vibruu! ü•≥'
    ];
    return variants[Math.floor(Math.random()*variants.length)];
  }

  // Open present button behavior: play video in fullscreen
  openGiftBtn.addEventListener('click', function onClick(evt){
    // start music if not playing yet (user gesture exists now)
    bgMusic.play().catch(()=>{});
    playVideoFullscreen('bdday_vib.mp4');
  });

function playVideoFullscreen(src) {
  // Create video element
    const video = document.createElement('video');
    video.src = src;
    video.autoplay = true;
    video.controls = false;
    video.playsInline = true;
    video.loop = false;
    video.style.top = '0';
    video.style.left = '0';
    video.setAttribute('aria-label','Birthday video');


  // Append and play
  document.body.appendChild(video);

  // Function to cleanly remove video and exit fullscreen
  function stopAndRemoveVideo() {
    try { video.pause(); } catch (e) {}
    if (video.parentNode) video.parentNode.removeChild(video);

    // Exit fullscreen if still in it
    if (document.fullscreenElement) {
      document.exitFullscreen().catch(() => {});
    } else if (document.webkitFullscreenElement) {
      document.webkitExitFullscreen();
    }

    // Remove event listeners
    document.removeEventListener('keydown', escHandler);
    document.removeEventListener('fullscreenchange', fsHandler);
    window.removeEventListener('popstate', backHandler);
  }

  // ESC key handler
  function escHandler(e) {
    if (e.key === 'Escape') {
      stopAndRemoveVideo();
    }
  }

  // Fullscreen exit handler (ESC or user manually exits)
  function fsHandler() {
    if (!document.fullscreenElement && !document.webkitFullscreenElement) {
      stopAndRemoveVideo();
    }
  }

  // Handle mobile "Back" button (Android)
  function backHandler() {
    stopAndRemoveVideo();
    history.pushState(null, document.title, location.href); // re-push to prevent leaving page
  }

  // Add listeners
  document.addEventListener('keydown', escHandler);
  document.addEventListener('fullscreenchange', fsHandler);
  window.addEventListener('popstate', backHandler);

  // push a history state so back button triggers popstate
  history.pushState(null, document.title, location.href);

  // request fullscreen (must be in response to user gesture)
  const goFull = () => {
    if (video.requestFullscreen) {
      video.requestFullscreen().catch(() => {});
    } else if (video.webkitRequestFullscreen) {
      video.webkitRequestFullscreen();
    }
  };
  try { goFull(); } catch (e) {}

  // Ensure playback
  video.play().catch(() => {});

  // When video ends, clean up
  video.addEventListener('ended', stopAndRemoveVideo);
}

   // Init: if target is already passed, begin birthday mode immediately; else run countdown
  const now = new Date();
  if (now >= target) {
    beginBirthdayMode();
  } else {
    startCountdown();
  }

})();
</script>

</body>
</html>






